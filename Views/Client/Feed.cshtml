@{
    Layout = "_LayoutClient";
    ViewData["Title"] = "Feed";
}

@model List<Freelancing.Models.Entities.Project>

<div class="p-4 sm:ml-64">
    <div class="p-4 mt-20">
        <div class="block w-full p-6">
            <h2 class="mb-4 text-2xl font-bold text-gray-900">Feed</h2>
            @foreach (var project in Model)
            {
                <div class="mb-4">
                    <a asp-controller="Client" asp-action="Project" asp-route-id="@project.Id" class="block max-w p-6 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-100">
                        <div class="flex items-center mb-4">
                            @if (!string.IsNullOrEmpty(project.User.Photo))
                            {
                                <img class="w-8 h-8 rounded-full" src="@project.User.Photo" alt="user photo">
                            }
                            else
                            {
                                <img class="w-8 h-8 rounded-full" src="https://ik.imagekit.io/6txj3mofs/GIGHub%20(11).png?updatedAt=1750552804497" alt="user photo">
                            }
                            <div class="ms-3">
                                <h5 class="text-md font-bold tracking-tight text-gray-900">@project.User.FirstName @project.User.LastName</h5>
                                <p class="text-xs text-gray-500">Posted: @project.CreatedAt.ToString("MMM dd, yyyy 'at' h:mm tt")</p>
                            </div>
                        </div>
                        <hr class="border-gray-300 mb-4">
                        <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900">@project.ProjectName</h5>
                        <h5 class="mb-2 text-md font-medium tracking-tight text-gray-900">@project.Category || ₱@project.Budget</h5>
                        <h5 class="mb-2 text-md font-light tracking-tight text-gray-900">@project.ProjectDescription</h5>
                        <div class="mt-3">
                            <p class="text-sm font-light italic text-gray-700 mb-1">Required Skills:</p>
                            @if (project.ProjectSkills != null && project.ProjectSkills.Any())
                            {

                                <div class="flex flex-wrap gap-1">
                                    @foreach (var projectSkill in project.ProjectSkills)
                                    {
                                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            @projectSkill.UserSkill.Name
                                        </span>
                                    }
                                </div>
                            }
                        </div>
                    </a>
                </div>
            }
        </div>
    </div>
</div>